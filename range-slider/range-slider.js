!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.RangeSlider=e():t.RangeSlider=e()}(this,(()=>(()=>{"use strict";var t,e={d:(t,n)=>{for(var s in n)e.o(n,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:n[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},n={};e.d(n,{default:()=>N}),function(t){t.handlerMovement="handlerMovement",t.externalChangeValue="externalChangeValue",t.tapOnSlider="tapOnSlider"}(t||(t={}));const s=t;var i;!function(t){t.onTouchSlider="onTouchSlider",t.onTouchHandler="onTouchHandler",t.onMoveHandler="onMoveHandler",t.onStopMoving="onStopMoving",t.onChangeState="onChangeState",t.onChangeValue="onCangeValue",t.onDestroy="onDestroy"}(i||(i={}));const r=i;var a;!function(t){t[t.Horizontal=0]="Horizontal",t[t.Vertical=1]="Vertical"}(a||(a={}));const o=a;function l(t,e,...n){const s=Object.keys(t);return n.filter((t=>t)).forEach((n=>{Object.entries(n).forEach((n=>{const[i,r]=n;void 0!==r&&(e||s.includes(i))&&(t[i]=r)}))})),t}function h(t){const{tagName:e="div",className:n,innerHtml:s,id:i,attrs:r}=t,a=document.createElement(e);if(n&&a.classList.add(...n.split(" ")),i&&(a.id=i),s&&(a.innerHTML=s),r)for(const t in r)a.setAttribute(t,r[t]);return a}function d(t,...e){t instanceof Array?t.forEach((t=>{t.classList.add(...e)})):t.classList.add(...e)}function c(t,e,n,s){t.forEach((t=>n.addEventListener(t,e,!!s&&{passive:!0})))}function u(t,e,n){t.forEach((t=>n.removeEventListener(t,e)))}function g(t,e){t.forEach(((t,n)=>{n>=e&&t.remove()}))}function p(t,e,n){const s=n.target;return s===e||e.contains(s)||t.composed&&t.composedPath().shift()===e}function m(t,e){if(0===t.type.indexOf("touch")){const e=Array.prototype.filter.call(t.touches,p);return!(e.length>1)&&e[0]}return!0}function S(t,e,n){let s=0,i=0;if(0===t.type.indexOf("touch")){const e=m(t);if(!e)return!1;s=e.pageX,i=e.pageY}else s=t.clientX,i=t.clientY;return n===o.Horizontal?s:i}class v{constructor(t,e){this.scaleSize=0,this.options={numberOfHandlers:1,minValue:0,maxValue:100,startValues:0,step:1,toolTips:!1,progressBar:!1,scale:!1,scaleStep:10},this.actions={start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},this.getBindElelementPaddingParametrs=()=>{const{handlerMinTranslate:t,handlerTop:e,handlerBottom:n}=this.handlerParametrs;return{handlerMinTrahslate:t,handlerTop:e,handlerBottom:n,scaleSize:this.scaleSize}},this.getScaleOptions=()=>{const{scaleStep:t,maxValue:e,minValue:n,step:s}=this.options,{sliderLength:i}=this.sliderParametrs,{handlerBottom:r,handlerTop:a}=this.handlerParametrs;return{orientation:this.sliderParametrs.orientation,numberOfSteps:(e-n)/s,scaleStep:t,sliderLength:i,handlerBottom:r,handlerTop:a,callback:this.setScaleSize}},this.createTooltips=()=>this.options.toolTips,this.createProgressBar=()=>this.options.progressBar,this.createScale=()=>this.options.scale,this.getOrientation=()=>this.sliderParametrs.orientation,this.getNumberOfHandlers=()=>this.options.numberOfHandlers,this.getHandlerBottom=()=>this.handlerParametrs.handlerBottom,this.getSliderLength=()=>this.sliderParametrs.sliderLength,this.getHandlerLength=()=>this.handlerParametrs.handlerLength,this.getHandlerStartPosition=()=>this.handlerParametrs.handlerMinTranslate,this.getEventNames=()=>this.actions,this.setSliderParametrs=t=>{this.sliderParametrs=t},this.setHandlerParametrs=t=>{this.handlerParametrs=t},this.initState=()=>{const t=[],e={values:[]},{values:n}=e,{numberOfHandlers:s,startValues:i,minValue:r,maxValue:a,step:o}=this.options,{handlerMinTranslate:l,handlerMaxTranslate:h}=this.handlerParametrs,d=this.getMinValuesRange(),c=this.getCount();if(s>1){let e=!0;if(Array.isArray(i)?(i.length!==s&&(e=!1),i.forEach(((s,r)=>{e&&(e=function(e,s,r){let h=0;const c={position:0,minTranslate:0,maxTranslate:0};if(e%o!=0)return!1;if(!Array.isArray(i))return!1;if(e>a)return!1;if(s>0)h=i[s-1]+d;else if(e<h)return!1;return e<h?e>=h-d&&h+d<=a&&(c.position=r.convertValueToPosition(h,l),t.push(c),n.push(`${i[s-1]}`),!0):e>=h&&h<=a&&(c.position=r.convertValueToPosition(e,l),t.push(c),n.push(`${e}`),!0)}(s,r,this))}))):e=!1,!e){let e;t.splice(0),n.splice(0);for(let i=0;i<s;i+=1){const h={position:0,minTranslate:0,maxTranslate:0};if(0!==i){e=(a-r)*i/(s-1)+r;const t=e%o;0!==t&&(e-=t)}else e=r;i===s-1&&(e=a),h.position=this.convertValueToPosition(e,l),n.push(`${e.toFixed(c)}`),t.push(h)}}this.updateLimits(t)}else{const e={position:0,minTranslate:l,maxTranslate:h};let s=r;Array.isArray(i)?1===i.length&&([s]=i):s=i,s>=r&&s<=a?e.position=this.convertValueToPosition(s,l):(e.position=l,s=r),n.push(`${s}`),t.push(e)}return{handlerStates:t,valuesState:e}},this.changeState=(t,e,n,i)=>{let a;switch(t){case s.handlerMovement:return a=this.changeStateWhenChangePosition(e,n,i),this.trigger(r.onChangeState,a,i,t),a;case s.tapOnSlider:{const s=this.getClosestHandlerId(n,e.handlerStates);return a=this.changeStateWhenChangePosition(e,n,s),this.updateLimits(e.handlerStates),this.trigger(r.onChangeState,a,s,t),a}case s.externalChangeValue:{if(i>=e.handlerStates.length)return e;const{handlerMinTranslate:s}=this.handlerParametrs,{sliderStartPosition:o}=this.sliderParametrs,l=this.convertValueToPosition(n,s)+o-s;return a=this.changeStateWhenChangePosition(e,l,i),this.updateLimits(e.handlerStates),this.trigger(r.onChangeState,a,i,t),a}default:return e}},this.updateLimits=t=>{const{handlerMinTranslate:e,handlerMaxTranslate:n,handlerLength:s}=this.handlerParametrs;return t.forEach(((i,r)=>{r-1>=0?(i.minTranslate=t[r-1].position+s,t[r-1].maxTranslate=i.position-s):i.minTranslate=e,r===t.length-1&&(i.maxTranslate=n)})),t},this.updateOptions=t=>{t&&(this.options=l(this.options,!1,t))},this.changeStateWhenChangePosition=(t,e,n)=>{const{minValue:s,maxValue:i}=this.options,{sliderParametrs:r}=this,{sliderStartPosition:a,sliderLength:o}=r,l=this.getStepLength(o);if(-1===n)return t;const{handlerMinTranslate:h}=this.handlerParametrs,d=t.handlerStates[n],{values:c}=t.valuesState,u=Number((e-a).toFixed(5));if(u+h<=d.minTranslate)return d.position=d.minTranslate,c[n]=n>0?c[n-1]:`${s}`,t;if(u+h>=d.maxTranslate)return d.position=d.maxTranslate,n<c.length-1?c[n]=c[n+1]:c[n]=`${i}`,t;let g=0,p=Number((Math.abs(u)/l).toFixed(8));if(g=d.position<=u+h?Math.floor(p):Math.ceil(p),0===g)return t;let m=g*l+h;return m>=d.minTranslate&&m<=d.maxTranslate&&(u<0&&(m=-m),d.position=m,c[n]=this.convertPositionToValue(m)),t},this.getClosestHandlerId=(t,e)=>{if(1===e.length)return 0;const{sliderStartPosition:n}=this.sliderParametrs,s=t-n;let i=0,r=Math.abs(e[0].position-s);return e.forEach(((t,e)=>{const n=Math.abs(t.position-s);n<r&&(r=n,i=e)})),i},this.getStepLength=t=>{const{step:e,minValue:n,maxValue:s}=this.options;return Number((t/(s-n)*e).toFixed(5))},this.convertValueToPosition=(t,e)=>{const{sliderLength:n}=this.sliderParametrs,{minValue:s,maxValue:i}=this.options;return n/(i-s)*(t-s)+e},this.convertPositionToValue=t=>{const{handlerMinTranslate:e}=this.handlerParametrs,{sliderLength:n}=this.sliderParametrs,{minValue:s,maxValue:i}=this.options,r=t,a=this.getCount();return((i-s)/n*(r-e)+s).toFixed(a)},this.getMinValuesRange=()=>{const{minValue:t,maxValue:e}=this.options,{handlerLength:n}=this.handlerParametrs,{sliderLength:s}=this.sliderParametrs;return(e-t)*n/s},this.checkOptions=()=>{let{numberOfHandlers:t}=this.options;const{minValue:e,maxValue:n,step:s}=this.options;t>1&&t%2!=0&&(t=1,this.options.numberOfHandlers=1),e>=n&&(this.options.minValue=0,this.options.maxValue=100),(n-e)/t<=s&&(this.options.step=s/10)},this.setScaleSize=t=>{this.scaleSize=t},this.updateOptions(e),this.checkOptions(),this.trigger=t}getCount(){var t;const{step:e}=this.options;return e.toString().includes(".")?null===(t=e.toString().split(".").pop())||void 0===t?void 0:t.length:0}}class b{constructor(t,e,n,s){this.onTouchSlider=t=>{t.stopPropagation();const e=S(t,this.sliderElement,this.orientation);this.trigger(r.onTouchSlider,e)},this.sliderElement=t,this.orientation=e,this.trigger=s,c(n().start.split(" "),this.onTouchSlider,t)}}class f{constructor(t){this.isInit=!0,this.onTouchHandler=()=>{this.callback(this.getSliderParametrs())},this.onChangeState=()=>{this.isInit&&(this.setParentPaddings(),this.isInit=!1)},this.getSliderParametrs=()=>{const t=this.sliderElement.getBoundingClientRect();return t.width>t.height?this.orientation=o.Horizontal:this.orientation=o.Vertical,this.orientation===o.Horizontal?(this.sliderHeight=t.height,{orientation:this.orientation,sliderLength:this.sliderElement.clientWidth,sliderStartPosition:t.left,sliderEndPosition:t.left+t.width}):(this.sliderHeight=t.width,{orientation:this.orientation,sliderLength:this.sliderElement.clientHeight,sliderStartPosition:t.top,sliderEndPosition:t.top+t.height})},this.setParentPaddings=()=>{const{handlerMinTrahslate:t,handlerTop:e,handlerBottom:n,scaleSize:s}=this.getPaddingParametrs(),i=this.sliderElement.parentElement;this.orientation===o.Horizontal?i&&(n+s+2>this.sliderHeight&&(i.style.paddingBottom=`${Math.abs(n+s-this.sliderHeight+3)}px`),e<0&&(i.style.paddingTop=`${Math.abs(e)}px`),t<0&&(i.style.paddingLeft=`${Math.abs(t)}px`,i.style.paddingRight=`${Math.abs(t)}px`)):i&&(e-s<0&&(i.style.paddingLeft=`${Math.abs(e-s)}px`),n>this.sliderHeight&&(i.style.paddingRight=`${Math.abs(n-this.sliderHeight+2)}px`),t<0&&(i.style.paddingTop=`${Math.abs(t)}px`,i.style.paddingBottom=`${Math.abs(t)}px`))};const{viewConnector:e,subscribeToTouchHandler:n,subscribeToChangeState:s,callback:i,trigger:r,getEventNames:a,getPaddingParametrs:l}=t;this.sliderElement=e.slider,this.getPaddingParametrs=l,this.callback=i,i(this.getSliderParametrs()),this.sliderListener=new b(this.sliderElement,this.orientation,a,r),s(this.onChangeState),n(this.onTouchHandler)}}class T{constructor(t,e,n,s,i){this.onTouchHandler=t=>{t.stopPropagation(),m(t,this.handler)&&(c(this.eventNames().move.split(" "),this.onMoveHandler,document.documentElement),c(this.eventNames().end.split(" "),this.onStopHandler,document.documentElement),this.trigger(r.onTouchHandler,this.id))},this.onMoveHandler=t=>{const e=S(t,this.handler,this.orientation);this.trigger(r.onMoveHandler,e,this.id)},this.onStopHandler=()=>{u(this.eventNames().move.split(" "),this.onMoveHandler,document.documentElement),u(this.eventNames().end.split(" "),this.onStopHandler,document.documentElement),this.trigger(r.onStopMoving,this.id)},this.orientation=n,this.eventNames=s,this.handler=t,this.id=e,this.trigger=i,c(this.eventNames().start.split(" "),this.onTouchHandler,t)}}class C{constructor(t,e){this.handlerListeners=[],this.handlerElements=[],this.getHandlerElements=()=>this.handlerElements,this.addListeners=t=>{const{trigger:e,orientation:n,getEventNames:s}=t;this.handlerElements.forEach(((t,i)=>{this.handlerListeners.push(new T(t,i,n,s,e))}))},this.onChachangeState=(t,e)=>{void 0!==e?this.moveHandlerToPosition(e,t.handlerStates[e].position-this.handlerMinTranslate):t.handlerStates.forEach(((t,e)=>this.moveHandlerToPosition(e,t.position-this.handlerMinTranslate)))},this.onDestroy=()=>{g(this.handlerElements,1)},this.moveHandlerToPosition=(t,e)=>{this.orientation===o.Horizontal?this.handlerElements[t].style.transform=`translateX(${e}px)`:this.handlerElements[t].style.transform=`translateY(${e}px)`},e((()=>{const{viewConnector:e,orientation:n,sliderLength:s}=t,{handlerElement:i}=e,r={handlerLength:0,handlerMinTranslate:0,handlerMaxTranslate:0,handlerTop:0,handlerBottom:0},a=window.getComputedStyle(i,null);let l=0,h=0,d=0,c=0;return n===o.Horizontal?(h=Number(a.left.match(/[-\d][0-9]+/)),l=Number(a.width.match(/[-\d][0-9]+/)),d=Number(a.top.match(/[-\d][0-9]+/)),c=Number(a.height.match(/[-\d][0-9]+/))):(l=Number(a.height.match(/[-\d][0-9]+/)),h=Number(a.top.match(/[-\d][0-9]+/)),d=Number(a.left.match(/[-\d][0-9]+/)),c=Number(a.width.match(/[-\d][0-9]+/))),this.handlerMinTranslate=h,r.handlerMinTranslate=h,r.handlerLength=l,r.handlerMaxTranslate=h+s,r.handlerTop=d,r.handlerBottom=c+d,r})()),this.init(t)}init(t){const{orientation:e,subscribeToChangeState:n,subscribeToDestroy:s}=t;this.orientation=e,this.handlerElements=(()=>{var e;const n=[],{numberOfHandlers:s,viewConnector:i}=t,{handlerElement:r}=i,a=document.createDocumentFragment();function o(t){const e=t.cloneNode(!0);n.push(e),a.append(e)}n.push(r);for(let t=1;t<s;t+=1)o(r);return null===(e=r.parentElement)||void 0===e||e.append(a),n})(),this.addListeners(t),n(this.onChachangeState),s(this.onDestroy)}}class H{constructor(t){this.onChangeState=(t,e)=>{let n,s,i=0;function r(t,e,r){const a=t%2==0,{minTranslate:o,position:l,maxTranslate:h}=e;i=Math.floor(t/2),a?(s=l+r.handlerLength/2,n=h+r.handlerLength-l):n=l-o+r.handlerLength,r.updateBarView(r.bars[i],s,n)}1===this.numberOfHandlers?(n=t.handlerStates[0].position+.5*this.handlerLength,t.handlerStates[0].position<=0&&(n=0),this.updateBarView(this.bars[0],0,n)):void 0===e?t.handlerStates.forEach(((t,e)=>{r(e,t,this)})):r(e,t.handlerStates[e],this)},this.onDestroy=()=>{g(this.bars,1),this.orientation===o.Horizontal?this.bars[0].style.width="0":this.bars[0].style.height="0"},this.updateBarView=(t,e,n)=>{void 0!==e&&(this.orientation===o.Horizontal?t.style.left=`${e}px`:t.style.top=`${e}px`),void 0!==n&&(this.orientation===o.Horizontal?t.style.width=`${n}px`:t.style.height=`${n}px`)},this.init(t)}init(t){const{viewConnector:e,numberOfHandlers:n,orientation:s,handlerLength:i,createProgressBar:r,subscribeToChangeState:a,subscribeToDestroy:l}=t,{progressBar:h}=e;this.orientation=s,this.handlerLength=i,this.numberOfHandlers=n,this.bars=function(){var t;if(void 0!==h){s===o.Horizontal?h.style.width="0":h.style.height="0";const e=[h];if(n>1){const s=document.createDocumentFragment();for(let t=1;t<n;t+=1)if(t%2==0){const t=h.cloneNode(!0);s.append(t),e.push(t)}null===(t=h.parentElement)||void 0===t||t.append(s)}return e}return[]}(),r&&a(this.onChangeState),l(this.onDestroy)}}class y{constructor(t){this.tooltips=[],this.getParametrs=()=>{const t=window.getComputedStyle(this.primeTooltip,null),{display:e}=t;return{display:e}},this.onChangeValues=t=>{this.tooltips.forEach(((e,n)=>this.setValue(e,t.valuesState.values[n])))},this.onTouchHandler=t=>{const{display:e}=this.parametrs;this.tooltips[t].style.display=e},this.onStopMovingHandler=t=>{this.tooltips[t].style.display="none"},this.onDestroy=()=>{const{display:t}=this.parametrs;this.primeTooltip.style.display=`${t}`},this.init(t)}init(t){const{orientation:e,handlerElements:n,handlerBottom:s,viewConnector:i,createTooltips:r,subscribeToChangeState:a,subscribeToTouchHandler:o,subscribeToStopMovingHandler:l,subscribeToDestroy:h}=t,{tooltip:d,setValueInTooltip:c}=i;void 0!==d&&(this.primeTooltip=d,this.parametrs=this.getParametrs(),h(this.onDestroy),void 0!==c&&r?(this.setValue=c,this.tooltips=function(){const t=[];return void 0!==d&&(d.style.display="none",d.parentElement===n[0]&&(t.push(d),n.forEach(((e,n)=>{if(n>0){const n=d.className.split(" ")[0],s=e.querySelector(`.${n}`);null!==s&&(s.style.display="none",t.push(s))}})))),t}(),a(this.onChangeValues),o(this.onTouchHandler),l(this.onStopMovingHandler)):d.style.display="none")}}class P{constructor(t,e,n){this.markersElements=[],this.createScale=(t,e)=>{const{numberOfSteps:n,scaleStep:s,sliderLength:i,handlerBottom:r,handlerTop:a,orientation:l}=e,{scaleElements:h}=t;if(void 0===h)return;const{markerLarge:d,markerDefault:c,scale:u}=h,g=document.createDocumentFragment();for(let t=0;t<=n;t+=1)if(t%s==0){const t=d.cloneNode(!0);g.append(t),this.markersElements.push(t)}else{const t=c.cloneNode(!0);g.append(t),this.markersElements.push(t)}u.append(g);const p=u.getBoundingClientRect();l===o.Horizontal?(u.style.width=`${i}px`,u.style.top=`${r+1}px`,this.scaleSize=p.height):(u.style.height=`${i}px`,u.style.left=a-p.width-1+"px",u.style.top="0",this.scaleSize=p.width)},this.onDestroy=()=>{this.markersElements.forEach((t=>t.remove()))};const{callback:s}=e;this.createScale(t,e),s(this.scaleSize),n(this.onDestroy)}}var M;!function(t){t.Default="scale__marker",t.Large="scale__marker scale__marker_large"}(M||(M={}));const E=M,x=t=>h({className:t}),V=t=>{const e=t.getBoundingClientRect(),n=h({className:"scale"}),s=x(E.Large),i=x(E.Default);return e.height>e.width&&d(n,"scale_vertical"),t.append(n),{scale:n,markerLarge:s,markerDefault:i}},w=(t,e)=>{t.innerHTML=e},L=(t,e)=>{const n=h({className:"slider-plugin"}),s=h({className:"slider-plugin__handler-container"}),i=(t=>{const e=h({className:"handler"});return t.append(e),e})(s);n.append(s);const r=(t=>{const e=h({className:"progress-bar"});return t.append(e),e})(n),a=(t=>{const e=h({className:"tooltip"});return t.append(e),e})(i);return t.append(n),e&&(d(n,"slider-plugin_vertical"),d(s,"slider-plugin__handler-container_vertical"),(t=>{d(t,"handler_vertical")})(i),(t=>{d(t,"tooltip_vertical")})(a),d(r,"progress-bar_vertical")),[n,i,r,a]};class O extends class{constructor(){this.events=new Map}on(t,e){var n;if(this.events.get(t))null===(n=this.events.get(t))||void 0===n||n.add(e);else{const n=new Set;this.events.set(t,n.add(e))}}off(t,e){var n;0!==this.events.size&&this.events.get(t)&&(null===(n=this.events.get(t))||void 0===n||n.delete(e))}removeAllEvents(){this.events.clear()}trigger(t,...e){var n;0!==this.events.size&&this.events.get(t)&&(null===(n=this.events.get(t))||void 0===n||n.forEach((t=>{t(...e)})))}}{constructor(t,e){super(),this.getState=()=>this.state,this.initSliderBase=t=>{this.sliderController=new f({viewConnector:t,getPaddingParametrs:this.dataController.getBindElelementPaddingParametrs,subscribeToChangeState:this.getStateSubscriber,subscribeToTouchHandler:this.getOnTouchSubscriber,callback:this.dataController.setSliderParametrs,getEventNames:this.dataController.getEventNames,trigger:this.newTrigger})},this.initHandlers=t=>{this.handlerController=new C({viewConnector:t,orientation:this.dataController.getOrientation(),sliderLength:this.dataController.getSliderLength(),numberOfHandlers:this.dataController.getNumberOfHandlers(),getEventNames:this.dataController.getEventNames,trigger:this.newTrigger,subscribeToChangeState:this.getStateSubscriber,subscribeToDestroy:this.addOnDestroySubscriber},this.dataController.setHandlerParametrs)},this.initProgressBar=t=>{this.barController=new H({viewConnector:t,orientation:this.dataController.getOrientation(),numberOfHandlers:this.dataController.getNumberOfHandlers(),handlerLength:this.dataController.getHandlerLength(),createProgressBar:this.dataController.createProgressBar(),subscribeToChangeState:this.getStateSubscriber,subscribeToDestroy:this.addOnDestroySubscriber})},this.initTooltips=(t,e)=>{this.tooltipController=new y({orientation:this.dataController.getOrientation(),viewConnector:t,handlerElements:e.getHandlerElements(),handlerBottom:this.dataController.getHandlerBottom(),createTooltips:this.dataController.createTooltips(),subscribeToChangeState:this.getStateSubscriber,subscribeToTouchHandler:this.getOnTouchSubscriber,subscribeToStopMovingHandler:this.getOnStopMovingSubscriber,subscribeToDestroy:this.addOnDestroySubscriber})},this.initScale=t=>{this.dataController.createScale()&&(this.scaleCreator=new P(t,this.dataController.getScaleOptions(),this.addOnDestroySubscriber))},this.onTouchHandler=()=>{this.on(r.onMoveHandler,this.onMoveHandler),this.on(r.onStopMoving,this.onStopMoving)},this.onTouchSlider=this.changeStateMethodCreator(s.tapOnSlider),this.onChangeValue=this.changeStateMethodCreator(s.externalChangeValue),this.onMoveHandler=this.changeStateMethodCreator(s.handlerMovement),this.onStopMoving=()=>{this.off(r.onMoveHandler,this.onMoveHandler),this.off(r.onStopMoving,this.onStopMoving),this.dataController.updateLimits(this.state.handlerStates)},this.onDestroy=()=>{this.onMoveHandler(this.dataController.getHandlerStartPosition(),0),this.removeAllEvents()},this.newTrigger=(t,...e)=>{this.trigger(t,...e)},this.getStateSubscriber=(t,e=!0)=>{e?this.on(r.onChangeState,t):this.off(r.onChangeState,t)},this.getOnTouchSubscriber=(t,e=!0)=>{e?this.on(r.onTouchHandler,t):this.off(r.onTouchHandler,t)},this.getOnStopMovingSubscriber=(t,e=!0)=>{e?this.on(r.onStopMoving,t):this.off(r.onStopMoving,t)},this.addOnDestroySubscriber=t=>{this.on(r.onDestroy,t)},this.init(t,e)}init(t,e){this.dataController=new v(this.newTrigger,e),this.initSliderBase(t),this.initHandlers(t),this.initProgressBar(t),this.initTooltips(t,this.handlerController),this.initScale(t),this.state=this.dataController.initState(),this.newTrigger(r.onChangeState,this.state),this.on(r.onTouchHandler,this.onTouchHandler),this.on(r.onTouchSlider,this.onTouchSlider),this.on(r.onChangeValue,this.onChangeValue),this.on(r.onDestroy,this.onDestroy)}changeStateMethodCreator(t){return(e,n)=>{let s;s=void 0===n?-1:n,this.state=this.dataController.changeState(t,this.state,e,s)}}}const N={createSliderPlugin:(t,e)=>{const n=t,s=new Map;let i,a=e,o=new O(n,e);return{updateSliderOptions:t=>{a=void 0!==a?l(a,!0,t):t,o.trigger(r.onDestroy),o=new O(n,a),void 0!==i&&i(t),s.forEach(((t,e)=>o.on(e,t)))},moveHandlerTo:(t,e)=>{o.trigger(r.onChangeValue,t,e)},subscribeToChangeState:(t,e=!0)=>{e?(o.on(r.onChangeState,t),s.set(r.onChangeState,t)):o.off(r.onChangeState,t)},subscribeToGetStarted:(t,e=!0)=>{e?(o.on(r.onTouchHandler,t),s.set(r.onTouchHandler,t)):o.off(r.onTouchHandler,t)},subscribeToTheEndOfTheMovement:(t,e=!0)=>{e?(o.on(r.onStopMoving,t),s.set(r.onStopMoving,t)):o.off(r.onStopMoving,t)},onChangeOptions:(t,e=!0)=>{i=t},getHandlerValue:t=>Number(o.getState().valuesState.values[t])}},getViewConnector:function(t){if(null===t)throw new Error("Slider container is null!");const e=t.getBoundingClientRect();let n=!1;e.height>e.width&&(n=!0);const s=L(t,n);return{slider:s[0],handlerElement:s[1],progressBar:s[2],tooltip:s[3],setValueInTooltip:w,scaleElements:V(s[0])}},getScale:V};return n.default})()));